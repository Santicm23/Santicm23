---
import { getLangFromUrl } from "@/utils/i18n"
import PortugalIcon from "../icons/PortugalIcon.astro"
import FranceIcon from "../icons/FranceIcon.astro"
import SpainIcon from "../icons/SpainIcon.astro"
import UnitedKingdomIcon from "../icons/UnitedKingdomIcon.astro"

const lang = getLangFromUrl(Astro.url)
---

<div
	id="lang-options"
	class="relative mt-6 hidden flex-col overflow-hidden rounded-lg border border-white opacity-0 shadow-xl outline-1 outline-gray-300 before:absolute before:left-0 before:top-0 before:-z-10 before:h-full before:w-full before:bg-slate-200/30 before:backdrop-blur-md group-hover:flex group-hover:opacity-100 dark:border-white/10 dark:shadow-none dark:outline-gray-700/20 before:dark:bg-gray-950/30"
>
	<a
		href="/"
		class:list={[
			"flex items-center gap-2 px-3 py-1 text-sm hover:bg-white/50 focus:outline-indigo-400 dark:hover:bg-gray-500/20 dark:focus:outline-violet-400",
			{ "bg-white/50 dark:bg-gray-500/20": lang === "en" },
		]}
	>
		<span><UnitedKingdomIcon class="h-4 w-4" /></span>
		<span class="w-full text-center text-slate-600 dark:text-slate-200"
			>English</span
		>
	</a>
	<a
		href="/es"
		class:list={[
			"flex items-center gap-2 px-3 py-1 text-sm hover:bg-white/50 focus:outline-indigo-400 dark:hover:bg-gray-500/20 dark:focus:outline-violet-400",
			{ "bg-white/50 dark:bg-gray-500/20": lang === "es" },
		]}
	>
		<span><SpainIcon class="h-4 w-4" /></span>
		<span class="w-full text-center text-slate-600 dark:text-slate-200"
			>Español</span
		>
	</a>
	<a
		href="/fr"
		class:list={[
			"flex items-center gap-2 px-3 py-1 text-sm hover:bg-white/50 focus:outline-indigo-400 dark:hover:bg-gray-500/20 dark:focus:outline-violet-400",
			{ "bg-white/50 dark:bg-gray-500/20": lang === "fr" },
		]}
	>
		<span><FranceIcon class="h-4 w-4" /></span>
		<span class="w-full text-center text-slate-600 dark:text-slate-200"
			>Français</span
		>
	</a>
	<a
		href="/pt"
		class:list={[
			"flex items-center gap-2 px-3 py-1 text-sm hover:bg-white/50 focus:outline-indigo-400 dark:hover:bg-gray-500/20 dark:focus:outline-violet-400",
			{ "bg-white/50 dark:bg-gray-500/20": lang === "pt" },
		]}
	>
		<span><PortugalIcon class="h-4 w-4" /></span>
		<span class="w-full text-center text-slate-600 dark:text-slate-200"
			>Português</span
		>
	</a>
</div>
<style>
	#lang-options {
		transition-property: height width opacity;
		transition-duration: 0.2s;
		transition-behavior: allow-discrete;

		@starting-style {
			opacity: 0;
		}
	}
</style>
